"use strict";function Crystal(a,b){var c={formID:a,ajaxSubmit:b,fields:[],addField:function(a,b){var c=new Field(a,b);this.fields.push(c)},inlineValidate:function(){for(var a=0;a<this.fields.length;a++)!this.fields[a].isValid()&&this.fields[a].wasActive()>0?(this.fields[a].domOBJ.className+=" invalid",this.fields[a].lastState=!1):(this.fields[a].domOBJ.className=this.fields[a].domOBJ.className.replace(/(?:^|\s)invalid(?!\S)/g,""),this.fields[a].lastState=!0)},ajaxSubmitForm:function(a){var b=this;document.getElementById(a).addEventListener("submit",function(c){var d=document.querySelectorAll(".alert-success"),e=document.querySelectorAll(".alert-invalid"),f=document.querySelectorAll(".invalid"),g=document.querySelectorAll(".required");c.preventDefault();for(var h=!0,i=0;i<b.fields.length;i++)b.fields[i].lastState===!1&&(h=!1);if(h===!0){var j=serialize(document.getElementById(a)),k=new XMLHttpRequest;k.open("POST","/",!0),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k.onreadystatechange=function(){if(4==k.readyState&&200==k.status){for(var a=0;a<f.length;a++)f[a].className.replace(/(?:^|\s)invalid(?!\S)/g,"");for(var a=0;a<e.length;a++)e[a].style.display="none";for(var a=0;a<d.length;a++)d[a].style.display="block"}},k.send(j)}else{for(var i=0;i<e.length;i++)e[i].style.display="block";for(var i=0;i<g.length;i++)g[i].className+=" invalid"}})},standardSubmitForm:function(a){document.getElementById(a).addEventListener("submit",function(a){var b=!0;for(var c in crystal)crystal[c].lastState===!1&&(a.preventDefault(),b=!1)})}};return b&&c.ajaxSubmitForm(a),c}function Field(a,b){this.domOBJ=b,this.regex=a,this.lastState=!1,this.timesActive=0,this.isValid=function(){return this.regex.test(this.domOBJ.value)?!0:!1},this.wasActive=function(){return this.domOBJ==document.activeElement?(this.timesActive++,this.timesActive):this.timesActive}}