"use strict";function Crystal(a,b){var c={formID:a,ajaxSubmit:b,fields:{},addField:function(a,b,c){var d=new Field(a,b);this.fields[c]=d},ajaxSubmitForm:function(a){var b=this;document.getElementById(a).addEventListener("submit",function(c){c.preventDefault();var d=!0;for(var e in b.fields)console.log(b.fields[e].lastState),b.fields[e].lastState===!1&&(d=!1);if(d===!0){console.log("All is valid!");var f=serialize(document.getElementById(a)),g=new XMLHttpRequest;g.open("POST","/",!0),g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.onreadystatechange=function(){4==g.readyState&&200==g.status&&b.style(!0)},g.send(f)}else b.style(!1)})},standardSubmitForm:function(a){var b=this;document.getElementById(a).addEventListener("submit",function(){var c=!0;for(var d in b.fields)console.log(b.fields[d].lastState),b.fields[d].lastState===!1&&(c=!1)})},style:function(a){var b=document.querySelectorAll(".crystal-alert-success"),c=document.querySelectorAll(".crystal-alert-invalid"),d=document.querySelectorAll(".crystal-invalid"),e=document.querySelectorAll(".crystal-required");if(a){for(var f=0;f<d.length;f++)d[f].className.replace(/(?:^|\s)invalid(?!\S)/g,"");for(var f=0;f<c.length;f++)c[f].style.display="none";for(var f=0;f<b.length;f++)b[f].style.display="block"}else{for(var f=0;f<c.length;f++)c[f].style.display="block";for(var f=0;f<e.length;f++)e[f].className+=" crystal-invalid"}}};return b&&c.ajaxSubmitForm(a),c}function Field(a,b){this.domOBJ=b,this.regex=a,this.lastState=!1,this.timesActive=0,this.wasActive=function(){return this.domOBJ==document.activeElement?(this.timesActive++,this.timesActive):this.timesActive},this.isValid=function(){return this.regex.test(this.domOBJ.value)?(this.domOBJ.className=this.domOBJ.className.replace(/(?:^|\s)crystal-invalid(?!\S)/g,""),this.lastState=!0,!0):(this.domOBJ.className+=" crystal-invalid",this.lastState=!1,!1)}}